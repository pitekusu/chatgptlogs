<!DOCTYPE html>
<html lang='ja'>

<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1">

  <!--   jQuery・bootstrapライブラリ読み込み -->
  <script src="https://code.jquery.com/jquery-3.4.1.min.js"></script>
  <script src="https://maxcdn.bootstrapcdn.com/bootstrap/3.3.1/js/bootstrap.min.js"></script>
  <link  href="https://maxcdn.bootstrapcdn.com/bootstrap/3.3.1/css/bootstrap.min.css" rel="stylesheet">
  <!--  /jQuery・bootstrapライブラリ読み込み -->

  <!--  BootGridライブラリ読み込み -->
  <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/jquery-bootgrid/1.3.1/jquery.bootgrid.css" />
  <script src="https://cdnjs.cloudflare.com/ajax/libs/jquery-bootgrid/1.3.1/jquery.bootgrid.min.js" ></script>
  <!--  /BootGridライブラリ読み込み -->

    <title>ChatGPTブッキー会話記録システム</title>
    <script type="text/javascript">
    $(document).ready(function() {
        // ページ読み込み時に実行したい処理
        var apiurl = "https://v2st81ure8.execute-api.ap-northeast-1.amazonaws.com/default/chatgptlog";

        $.ajax({
                url: apiurl,
                type: 'GET',
                dataType: 'json',
            })
            // Ajaxリクエストが成功した時発動
            .done(function(response) {
                var item = response.Items;
                var table = document.getElementById('chatgptlog');
                for (let i = 0; i < item.length; i++) {
                    var tr = $('<tr></tr>').appendTo(table);
                    $('<td>' + item[i].datetime + '</td>').appendTo(tr);
                    $('<td>' + item[i].username + '</td>').appendTo(tr);
                    $('<td>' + item[i].usermessage + '</td>').appendTo(tr);
                    $('<td>' + item[i].fubukimessage + '</td>').appendTo(tr);
                }

            })
            .fail(function(jqXHR, textStatus, errorThrown) {
                alert('エラーです')
            })
    });
    </script>
</head>

<body>
    <nav class="navbar navbar-inverse">
        <div class="container">
            <div class="navbar-header">
                <p>ChatGPTブッキー会話記録システム</p>
            </div>
        </div>
    </nav>
    <div class="container">
        <div class="card card-primary mb-3">
            <div class="card-header">
                <h5 class="card-title">ブッキー会話記録</h5>
            </div>
            <table id="grid-basic" class="table table-condensed table-hover table-striped">
                <thead>
                  <tr>
                    <th data-column-id="datetime" data-order="desc">日次</th>
                    <th data-column-id="name">ユーザ名</th>
                    <th data-column-id="usermessage">ユーザの質問</th>
                    <th data-column-id="fubukimessage">ブッキーの回答</th>
                  </tr>
                </thead>
                <tbody id='chatgptlog'>
                </tbody>
            </table>
        </div>
    </div>
    <script>
        $(function() {
          $("#grid-basic").bootgrid({
            labels: {
                noResults: "検索結果 0件",
                infos: "全 {{ctx.total}}件中 / {{ctx.start}}～{{ctx.end}}まで表示"
                
            }  
          
         } );
        });
    </script>
</body>

</html>
